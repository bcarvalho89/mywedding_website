/*!
 * mywedding_website
 * My Wedding Website
 * http://brukel.cf
 * @author Bruno Carvalho
 * @version 1.0.0
 * Copyright 2016. MIT licensed.
 */
!function(e,a,s,n){"use strict";e(function(){var n=e("#messages"),t="inc/guestbook/message.php",o=n.data("page");e(s).ready(function(){e("#guestbook").submit(function(a){a.preventDefault();var s=e(this).find("#guestName").val(),n=e(this).find("#guestMessage").val();e.ajax({url:t,type:"POST",dataType:"json",data:{name:s,message:n,insert:!0}}).done(function(e){console.log(e),console.log("success")}).fail(function(e){console.log(e),console.log("error")}).always(function(){console.log("complete")})}),e.getJSON(t,{select:!0,page:o},function(e){if(e.success)for(var a=e.data,s=0;s<a.length;s++){var t='<div class="message"><p>'+a[s].message+"</p><h2>"+a[s].name+"</h2><span>"+a[s].date_time+"</span></div>";n.append(t)}else n.append("Sem mensagens")}),e("#load-more").click(function(){var a=n.data("page"),s=e(this);e.getJSON(t,{select:!0,page:a+1},function(e){if(e.success){for(var t=e.data,o=0;o<t.length;o++){var i='<div class="message"><p>'+t[o].message+"</p><h2>"+t[o].name+"</h2><span>"+t[o].date_time+"</span></div>";n.append(i)}n.data("page",a+1)}else s.attr("disabled","disabled")})})}),e(a).resize(function(){}),e(a).scroll(function(){})})}(jQuery,window,document);