/*!
 * mywedding_website
 * My Wedding Website
 * http://brukel.cf
 * @author Bruno Carvalho
 * @version 1.0.0
 * Copyright 2016. MIT licensed.
 */
!function(e,s,a,n){"use strict";e(function(){var n=e("#messages"),t="inc/guestbook/message.php",o=n.data("page");e(a).ready(function(){e("#guestbook").submit(function(s){s.preventDefault();var a=e(this).find("#guestName").val(),o=e(this).find("#guestMessage").val(),i=this;e.ajax({url:t,type:"POST",dataType:"json",data:{name:a,message:o,insert:!0}}).done(function(e){if(console.log(e),e.success){var s=e.data,a='<div class="message"><p>'+s.message+"</p><h2>"+s.name+"</h2><span>"+s.date_time+"</span></div>";n.prepend(a),i.reset()}console.log("success")}).fail(function(e){console.log(e),console.log("error")}).always(function(){console.log("complete")})}),e.getJSON(t,{select:!0,page:o},function(e){if(e.success)for(var s=e.data,a=0;a<s.length;a++){var t='<div class="message"><p>'+s[a].message+"</p><h2>"+s[a].name+"</h2><span>"+s[a].date_time+"</span></div>";n.append(t)}else n.append("Sem mensagens")}),e("#load-more").click(function(){var s=n.data("page"),a=e(this);e.getJSON(t,{select:!0,page:s+1},function(e){if(e.success){for(var t=e.data,o=0;o<t.length;o++){var i='<div class="message"><p>'+t[o].message+"</p><h2>"+t[o].name+"</h2><span>"+t[o].date_time+"</span></div>";n.append(i)}n.data("page",s+1)}else a.attr("disabled","disabled")})})}),e(s).resize(function(){}),e(s).scroll(function(){})})}(jQuery,window,document);