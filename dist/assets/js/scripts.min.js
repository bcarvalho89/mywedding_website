/*!
 * mywedding_website
 * My Wedding Website
 * http://brukel.cf
 * @author Bruno Carvalho
 * @version 1.0.0
 * Copyright 2016. MIT licensed.
 */
!function(e,a,s,n){"use strict";e(function(){var n=e("#messages"),t="inc/guestbook/message.php",i=n.data("page");e(s).ready(function(){e("#guestbook").submit(function(a){a.preventDefault();var s=e(this).find("#guestName").val(),i=e(this).find("#guestMessage").val(),o=this;e.ajax({url:t,type:"POST",dataType:"json",data:{name:s,message:i,insert:!0}}).done(function(e){if(console.log(e),e.success){var a=e.data,s='<div class="message"><p>'+a.message+"</p><h2>"+a.name+"</h2><span>"+a.dateTime+"</span></div>";n.prepend(s),o.reset()}}).fail(function(e){console.log(e)}).always(function(){})}),e.getJSON(t,{select:!0,page:i},function(e){if(e.success)for(var a=e.data,s=0;s<a.length;s++){var t='<div class="message"><p>'+a[s].message+"</p><h2>"+a[s].name+"</h2><span>"+a[s].dateTime+"</span></div>";n.append(t)}else n.append("Sem mensagens")}),e("#load-more").click(function(){var a=n.data("page"),s=e(this);e.getJSON(t,{select:!0,page:a+1},function(e){if(e.success){for(var t=e.data,i=0;i<t.length;i++){var o='<div class="message"><p>'+t[i].message+"</p><h2>"+t[i].name+"</h2><span>"+t[i].dateTime+"</span></div>";n.append(o)}n.data("page",a+1)}else s.attr("disabled","disabled")})})}),e(a).resize(function(){}),e(a).scroll(function(){var s=a.scrollY,n=15*s/e(a).height();e(".intro .cover").css({"background-position-y":100-n+"%"})})})}(jQuery,window,document);